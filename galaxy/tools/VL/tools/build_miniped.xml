<tool id="vl_tools_build_miniped" name="VLT.build_miniped">
  <description>
    Build a reduced ped file from Omero server
  </description>
  <command interpreter="python">
    build_miniped.py
    #if $advanced_configuration.configuration_level == 'advanced'
      --host=${advanced_configuration.vl_host}
      --user=${advanced_configuration.vl_user}
      --passwd=${advanced_configuration.vl_passwd}
    #end if
    #if $study
      --study=${study}
    #end if
    --ofile=${output1}
    --loglevel=$__app__.config.vl_loglevel
    --logfile=${logfile}
  </command>  
  <inputs>   
    <param name="study" type="select" label="Fetch individuals from one or more of these studies..."
	   display="checkboxes" multiple="true"
	   help="Retrieve individuals from the selected studies">
      <options from_parameter="tool.app.known_studies"
	       transform_lines="[ &quot;%s%s%s&quot;
	                          % (l[0], self.separator, l[0])
				  for l in obj ]">
	<column name="value" index="1"/>
	<column name="name" index="0"/>
	<filter type="sort_by" column="0"/>
      </options>
    </param>
    <!-- ************************************************** -->
    <conditional name="advanced_configuration">
      <param name="configuration_level" type="select" 
	     label="Configuration level">
	<option value="default" selected="true">Default configuration</option>	
	<option value="advanced">Advanced configuration</option>
      </param>
      <when value="default"/>
      <when value="advanced">
	<param name="vl_host" size="40" type="text" value="biobank09.crs4.it" 
	       label="Omero/VL host"/>
	<param name="vl_user" size="20" type="text" value="galaxy" 
	       label="Omero/VL user"/>
	<param name="vl_passwd" size="20" type="text" value="What?Me worry?" 
	       label="Omero/VL passwd"/>
      </when>
    </conditional>
  </inputs>

  <outputs>
    <data format="tabular" name="output1" label="${tool.name}.csv"/>
    <data format="txt" name="logfile"     label="${tool.name}.logfile"/>
  </outputs>
  <help>
    It will output a tsv files with a column of codes for each groups of samples.
  </help>

</tool>
