<tool id="vl_tools_lookup_index" name="VLT.lookup_index">
  <description>lookup dbSNP index</description>
  <command interpreter="python">
    lookup_index.py --logfile ${log_file} lookup_index -i ${input_file}
    -o ${output_file}
    --index-file "${ filter( lambda x: str( x[0] ) == str( $indices ), $__app__.tool_data_tables[ 'dbsnp_indexes' ].get_fields() )[0][-1] }"
  </command>
  <inputs>
    <param name="input_file" type="data" format="interval" label="input file" />
    <param name="indices" type="select" label="Select a dbSNP index">
      <options from_data_table="dbsnp_indexes">
	<filter type="sort_by" column="2" />
	<validator type="no_options" message="No indexes are available" />
      </options>
    </param>
  </inputs>
  <outputs>
    <data name="output_file" format="tabular" />
    <data format="txt" name="log_file" label="${tool.name}.log_file"/>
  </outputs>
  <help>
**What it does**

This tool reads a Galaxy genome segment extractor output in interval
format and performs a lookup in the selected dbSNP index to get the
true rs label. It outputs a new marker definitions file with the true
rs labels and masks.
  </help>
</tool>
