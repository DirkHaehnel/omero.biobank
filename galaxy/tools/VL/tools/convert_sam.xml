<tool id="vl_tools_convert_sam" name="VLT.convert_sam">
  <description>converter</description>
  <command interpreter="python">
    convert_sam.py --logfile ${log_file} convert_sam -i ${input_file}
    -o ${output_file} --reftag ${dbkey} --output-format ${output_type}
    ## FIXME: find a way to import the default from the relevant module
    --flank-size 125
  </command>
  <inputs>
    <param name="input_file" type="data" format="sam" label="SAM input file" />
    <param name="output_type" type="select" label="Convert to:">
      <option value="marker_alignment">VL marker alignment</option>
      <option value="segment_extractor">Genome segment extractor</option>
    </param>
  </inputs>
  <outputs>
    <data name="output_file">
      <change_format>
        <when input="output_type" value="marker_alignment" format="tabular" />
        <when input="output_type" value="segment_extractor" format="interval" />
      </change_format>
    </data>
    <data format="txt" name="log_file" label="${tool.name}.log_file"/>
  </outputs>
  <help>
**What it does**

This tool converts SAM alignment data to VL marker alignment or Galaxy
extract genomic DNA input.

Expects single-end BWA alignment data produced by the previous steps
in the workflow (see markers_to_fastq).

**NOTE:** if the marker_alignment output format is selected, the
Database/Build property must be set in the input SAM file.
  </help>
</tool>
